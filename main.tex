%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Slides for the TechCon 2022 talk "PyAnsys tools for unit testing" 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[t]{beamer}

\usetheme{Ansys2022}

\usepackage{minted}
\usepackage{xcolor}
\usepackage{pdfpages}
\usepackage{listings}
\usepackage{tikz}
\usepackage{hyperref}

\usepackage[edges]{forest}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
}
 

\urlstyle{same}
\setbeamercolor{background canvas}{bg=}

\definecolor{bleudefrance}{rgb}{0.19, 0.55, 0.91}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usetikzlibrary{shapes.geometric, arrows,positioning}

\tikzset{
  startstop/.style={
    rectangle, 
    rounded corners,
    minimum width=3cm,
    minimum height=0.75cm,
    align=center, 
    draw=black, 
    fill=ANSYS@Gold,
    },
  process/.style={
    rectangle, 
    minimum width=3cm, 
    minimum height=0.75cm, 
    align=center, 
    draw=black, 
    fill=ANSYS@Blue,
    text=white,
    },
  decision/.style={
    diamond, 
    aspect=4,
    minimum width=3cm, 
    minimum height=1cm,
    align=center,
    draw=black, 
    fill=ANSYS@Blue,
    text=white,
    },
  arrow/.style={thick,->,>=stealth},
  dec/.style={
    ellipse, 
    align=center, 
    draw=black, 
    fill=ANSYS@Bronze,
    },
}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Title Slide

\title{PyAnsys tools for unit testing}
\subtitle{Applying test-driven development}
\author{Author: PyAnsys Core Team}
\date{\today}

\titleframe{}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Table of contents

\begin{frame}{Table of Contents}
  \tableofcontents
  \vspace{200pt}  %% force top left  
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}
\begin{frame}[fragile=singleslide]
  \frametitle{What is test-driven development (TDD)}

  \begin{itemize}

  \item{\textbf{What is test-driven development?}
    
    As soon as the code base gets modified, a collection of tests get executed
    to guarantee the integrity of the new code.

  }

  \item{\textbf{What are its main advantages?}
 
    It allows developers to develop code in a faster and robust manner.

    }

        
  \item {\textbf{pytest as the main testing framework for PyAnsys}

    The pytest testing framework is the reference one in the Pyton community. It
    easy to use, fast and highly customizable.

    }

  \end{itemize}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{An overview of pytest capabilities}

\begin{frame}
  \frametitle{Content}
  \tableofcontents[currentsection]
  \vspace{200pt}  %% force top left
\end{frame}


\subsection{Basic assertions with pytest}
\begin{frame}[fragile=singleslide]  % must use fragile with any input listing
  \frametitle{Basic assertions with pytest}

   \begin{itemize}
        \item Tests are defined using functions starting with the \textit{test} prefix.
        \item Use the \textit{assert} keyword to compare current and expected results.
        \item Run your tests by executing \textit{pytest -vv tests/}
   \end{itemize}

\end{frame}

\input{code/basic_assertion.py}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Transition Slide}
\begin{frame}[fragile=singleslide]
  \frametitle{Transition Slide}

  A transition slide can be created with:
  \vspace{\baselineskip}

  \verb|\textbackslash transitionframe{Transition slide text}|
  \vspace{\baselineskip}

  Note how \verb|The [fragile=singleslide]|option is used when using verbatim
  text within this slide.
  \vspace{\baselineskip}

  Transition slide follows.

\end{frame}

\transitionframe{Transition slide text}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{End Slide}
\begin{frame}[fragile=singleslide]
  \frametitle{End Slide}

  The end slide can be created with:
  \vspace{\baselineskip}

  \verb|\lastframe|
  \vspace{\baselineskip}

  The end slide follows.

\end{frame}

\lastframe{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{LaTeX Beamer Features}

\begin{frame}
  \frametitle{LaTeX Beamer Features}
  \tableofcontents[currentsection]
  \vspace{200pt}  %% force top left
\end{frame}

\begin{frame}[fragile=singleslide]
  \frametitle{LaTeX Beamer Features}

  The Beamer document class contains a variety of features to simplify creating
  presentations within LaTeX. This includes:

  \begin{itemize}
    \item{Title Page}
    \item{Table of Contents}
    \item{Blocks}
  \end{itemize}

  For more details, see
  \href{https://www.overleaf.com/learn/latex/Beamer}{Overleaf - Beamer}.

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Title Slide}
\begin{frame}[fragile=singleslide]
  \frametitle{Title Slide}

  The title slide uses the \verb|\titleframe{}| command preceded by commands
  containing metadata of the presentation.

  \begin{lstlisting}[basicstyle=\footnotesize\ttfamily]

\title{Title}
\subtitle{Subtitle (optional)}
\author{First Middle Last}
\date{\today}

  \end{lstlisting}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Table of Contents}
\begin{frame}[fragile=singleslide]
  \frametitle{Title Slide}

  You can auto-generate a table of contents using the \verb|\tableofcontents|
  command. For example:

  \begin{lstlisting}[basicstyle=\footnotesize\ttfamily]
\begin{frame}{Table of Contents}
  \tableofcontents
  \vspace{200pt}  %% force top left  
\end{frame}
  \end{lstlisting}

  This table of contents will be built off of the standard \verb|\section| and
  \verb|\subsection| used to organize your presentation. These should precede
  key slides right before \verb|\begin{frame}|.

  \begin{lstlisting}[basicstyle=\footnotesize\ttfamily]
\section{Problem statement}
\section{Existing results}
    \subsection{Method 1}
    \subsection{Method 2}
\section{Comparative study}
  \end{lstlisting}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Blocks}
\begin{frame}
  \frametitle{Blocks}

  Blocks can be used to highlight important points within a presentation.

  \begin{block}{Default Block}
    Block text.
  \end{block}

  \begin{alertblock}{Alert Block}
    Block text in an alert block.
  \end{alertblock}

  \begin{examples}
    Block text in Ansys Gold block.
  \end{examples}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Content}

\begin{frame}
  \frametitle{Content}
  \tableofcontents[currentsection]
  \vspace{200pt}  %% force top left
\end{frame}


\begin{frame}
  \frametitle{Content}
  Content in a Beamer presentation can come in a variety of forms, including:

  \begin{itemize}
    \item{Figures}
    \item{Flowcharts}
    \item{Code}
  \end{itemize}

  The following slides provide several examples for how you can include content
  in a LaTeX presentation.

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Figures}
\begin{frame}
  \frametitle{Figures - Full Slide}
  \vspace{-10pt}

  Figures can be made to take up most of the slide:

  \centering
  \includegraphics[height=.7\textheight]{./figures/github.png}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[fragile=singleslide]
  \frametitle{Figures - Using Tabular}
  \vspace{-10pt}

  Figures can also be made to fit alongside text content using either tables or
  columns. Here we demonstrate using tables with the figure on the left.

  \vspace{6pt}

  \begin{tabular}{cl}  
    \begin{tabular}{c}
      \includegraphics[height=5cm, width=3.5cm]{figures/blade_accuracy.png}
    \end{tabular}
    & \begin{tabular}{r}
        \parbox{0.7\linewidth}{
            \begin{itemize}
            \item{Item A}
            \item{Item B}
            \item{Item C}
            \end{itemize}
        }
      \end{tabular}  \\
\end{tabular}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[fragile=singleslide]
  \frametitle{Figures - Using Columns}
  \vspace{-10pt}

  Here we demonstrate showing a figure using two columns with code on the left
  and the figure on the right.

  \hrulefill{}

  \begin{columns}[T]
    \begin{column}{.5\textwidth}
      \vspace{-5pt}
      \inputminted[fontsize=\footnotesize]{python}{code/sample_mpl.py}
    \end{column}

    \begin{column}{.5\textwidth}          
      %% \begin{figure}
      \centering
      \includegraphics[height=5cm]{figures/sample_mpl.png}
      %% \end{figure}
    \end{column}

  \end{columns}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Flowchart}
\begin{frame}
  \frametitle{Example Flowchart}
  \vspace{-10pt}

    \begin{columns}[T]
        \begin{column}{.6\textwidth}
          \begin{itemize}
            \item This is a two column slide with a sample flowchart on the right.
            \item This flowchart uses the edges package.
            \item This two column format is helpful when including figures and
              text in the same page.
          \end{itemize}
        \end{column}


        \begin{column}{.4\textwidth}          
          \begin{figure}
            \centering
            \begin{forest}
              for tree={
                draw,
                align=center
              },
              forked edges,
              [Front-end\\ (e.g. Python{,} JS{,} or C++),
                [Auto-generated code
                  [gRPC Process
                    [Application or Service, fill=bleudefrance]
                  ]
                ]
              ]
            \end{forest}
          \end{figure}
        \end{column}

    \end{columns}

\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% End of presentation

\lastframe{}

\end{document}
